{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProfilePage(){const[newUsername,setNewUsername]=useState('');const[newPassword,setNewPassword]=useState('');const apiKey=localStorage.getItem('api_key');// Assuming the API key is stored in localStorage\nconst username=sessionStorage.getItem('username');const password=sessionStorage.getItem('password');const handleChangeUsername=async e=>{e.preventDefault();try{const response=await fetch('/api/user/username',{method:'POST',headers:{'Content-Type':'application/json','API-Key':apiKey},body:JSON.stringify({new_username:newUsername})});if(!response.ok){throw new Error('Failed to update username');}const data=await response.json();console.log(data.message);// Update sessionStorage with the new username\nsessionStorage.setItem('username',newUsername);// Optionally, inform the user of success\n}catch(error){console.error('Error updating username:',error);// Optionally, handle/display the error to the user\n}};const handleChangePassword=async e=>{e.preventDefault();try{const response=await fetch('/api/user/password',{method:'POST',headers:{'Content-Type':'application/json','API-Key':apiKey},body:JSON.stringify({new_password:newPassword})});if(!response.ok){throw new Error('Failed to update password');}const data=await response.json();console.log(data.message);// Update sessionStorage with the new password\nsessionStorage.setItem('password',newPassword);// Optionally, inform the user of success\n}catch(error){console.error('Error updating password:',error);// Optionally, handle/display the error to the user\n}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profile Page\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleChangeUsername,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newUsername,onChange:e=>setNewUsername(e.target.value),placeholder:username,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Change Username\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleChangePassword,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newPassword,onChange:e=>setNewPassword(e.target.value),placeholder:password,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Change Password\"})]})]});}export default ProfilePage;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","ProfilePage","newUsername","setNewUsername","newPassword","setNewPassword","apiKey","localStorage","getItem","username","sessionStorage","password","handleChangeUsername","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","new_username","ok","Error","data","json","console","log","message","setItem","error","handleChangePassword","new_password","children","onSubmit","type","value","onChange","target","placeholder","required"],"sources":["/Users/rdi28/Desktop/WebDev/FinalProject2/final-project-belay-ron-di28/app/src/Profile.js"],"sourcesContent":["import React, { useState } from 'react';\n\nfunction ProfilePage() {\n  const [newUsername, setNewUsername] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n\n  const apiKey = localStorage.getItem('api_key'); // Assuming the API key is stored in localStorage\n  const username = sessionStorage.getItem('username');\n  const password = sessionStorage.getItem('password');\n\n  const handleChangeUsername = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await fetch('/api/user/username', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'API-Key': apiKey\n        }, \n        body: JSON.stringify({ new_username: newUsername }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to update username');\n      }\n\n      const data = await response.json();\n      console.log(data.message);\n      // Update sessionStorage with the new username\n      sessionStorage.setItem('username', newUsername);\n      // Optionally, inform the user of success\n    } catch (error) {\n      console.error('Error updating username:', error);\n      // Optionally, handle/display the error to the user\n    }\n  };\n\n  const handleChangePassword = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await fetch('/api/user/password', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'API-Key': apiKey\n        }, \n        body: JSON.stringify({ new_password: newPassword }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to update password');\n      }\n\n      const data = await response.json();\n      console.log(data.message);\n      // Update sessionStorage with the new password\n      sessionStorage.setItem('password', newPassword);\n      // Optionally, inform the user of success\n    } catch (error) {\n      console.error('Error updating password:', error);\n      // Optionally, handle/display the error to the user\n    }\n  };\n\n  return (\n    <div>\n      <h2>Profile Page</h2>\n      <form onSubmit={handleChangeUsername}>\n        <input\n          type=\"text\"\n          value={newUsername}\n          onChange={(e) => setNewUsername(e.target.value)}\n          placeholder={username}\n          required\n        />\n        <button type=\"submit\">Change Username</button>\n      </form>\n\n      <form onSubmit={handleChangePassword}>\n        <input\n          type=\"text\"\n          value={newPassword}\n          onChange={(e) => setNewPassword(e.target.value)}\n          placeholder={password}\n          required\n        />\n        <button type=\"submit\">Change Password</button>\n      </form>\n    </div>\n  );\n}\n\nexport default ProfilePage;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExC,QAAS,CAAAC,WAAWA,CAAA,CAAG,CACrB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGP,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACQ,WAAW,CAAEC,cAAc,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAElD,KAAM,CAAAU,MAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,CAAE;AAChD,KAAM,CAAAC,QAAQ,CAAGC,cAAc,CAACF,OAAO,CAAC,UAAU,CAAC,CACnD,KAAM,CAAAG,QAAQ,CAAGD,cAAc,CAACF,OAAO,CAAC,UAAU,CAAC,CAEnD,KAAM,CAAAI,oBAAoB,CAAG,KAAO,CAAAC,CAAC,EAAK,CACxCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oBAAoB,CAAE,CACjDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,SAAS,CAAEZ,MACf,CAAC,CACDa,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,YAAY,CAAEpB,WAAY,CAAC,CACpD,CAAC,CAAC,CAEF,GAAI,CAACa,QAAQ,CAACQ,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CAC9C,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAV,QAAQ,CAACW,IAAI,CAAC,CAAC,CAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAACI,OAAO,CAAC,CACzB;AACAnB,cAAc,CAACoB,OAAO,CAAC,UAAU,CAAE5B,WAAW,CAAC,CAC/C;AACF,CAAE,MAAO6B,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChD;AACF,CACF,CAAC,CAED,KAAM,CAAAC,oBAAoB,CAAG,KAAO,CAAAnB,CAAC,EAAK,CACxCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,oBAAoB,CAAE,CACjDC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBAAkB,CAClC,SAAS,CAAEZ,MACf,CAAC,CACDa,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEY,YAAY,CAAE7B,WAAY,CAAC,CACpD,CAAC,CAAC,CAEF,GAAI,CAACW,QAAQ,CAACQ,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,CAAC,2BAA2B,CAAC,CAC9C,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAV,QAAQ,CAACW,IAAI,CAAC,CAAC,CAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAACI,OAAO,CAAC,CACzB;AACAnB,cAAc,CAACoB,OAAO,CAAC,UAAU,CAAE1B,WAAW,CAAC,CAC/C;AACF,CAAE,MAAO2B,KAAK,CAAE,CACdJ,OAAO,CAACI,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAChD;AACF,CACF,CAAC,CAED,mBACE/B,KAAA,QAAAkC,QAAA,eACEpC,IAAA,OAAAoC,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBlC,KAAA,SAAMmC,QAAQ,CAAEvB,oBAAqB,CAAAsB,QAAA,eACnCpC,IAAA,UACEsC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEnC,WAAY,CACnBoC,QAAQ,CAAGzB,CAAC,EAAKV,cAAc,CAACU,CAAC,CAAC0B,MAAM,CAACF,KAAK,CAAE,CAChDG,WAAW,CAAE/B,QAAS,CACtBgC,QAAQ,MACT,CAAC,cACF3C,IAAA,WAAQsC,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,iBAAe,CAAQ,CAAC,EAC1C,CAAC,cAEPlC,KAAA,SAAMmC,QAAQ,CAAEH,oBAAqB,CAAAE,QAAA,eACnCpC,IAAA,UACEsC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEjC,WAAY,CACnBkC,QAAQ,CAAGzB,CAAC,EAAKR,cAAc,CAACQ,CAAC,CAAC0B,MAAM,CAACF,KAAK,CAAE,CAChDG,WAAW,CAAE7B,QAAS,CACtB8B,QAAQ,MACT,CAAC,cACF3C,IAAA,WAAQsC,IAAI,CAAC,QAAQ,CAAAF,QAAA,CAAC,iBAAe,CAAQ,CAAC,EAC1C,CAAC,EACJ,CAAC,CAEV,CAEA,cAAe,CAAAjC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}